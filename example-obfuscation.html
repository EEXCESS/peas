<!DOCTYPE html>
<html>
	<head>
		<title></title>
		<script src="bower_components/requirejs/require.js"></script>
		<script>
			require(["peas_indist"], function(peas_indist){
				
				document.getElementById("go").addEventListener("click", function(){ 
					var originalQuery = JSON.parse(document.getElementById("originalQuery").value);
					var nbFakeQueries = document.getElementById("nbFakeQueries").value;
					if (originalQuery != ""){
						var obfuscatedQueryStr;
						if (nbFakeQueries <= 0){
							obfuscatedQueryStr = JSON.stringify(originalQuery.contextKeywords);
						} else {
							var obfuscatedQuery = peas_indist.obfuscateQuery(originalQuery, nbFakeQueries);
							obfuscatedQueryStr = JSON.stringify(obfuscatedQuery.contextKeywords);
						}
						document.getElementById("obfuscatedQuery").innerHTML = obfuscatedQueryStr;
					}
				});			
			});
		</script>
	</head>
	<body>
		<form>
			<p>
				Original query: <br/>
				<textarea id="originalQuery" rows="10" cols="150">{
   "numResults":3,
   "contextKeywords":[
   		{"text":"graz",	"weight":0.1},
		{"text":"vienna", "weight":0.1}
   ]
}</textarea>
			</p>
			<p>
				Number of fake queries: 
				<select id="nbFakeQueries">
					<option value="0">0</option>
					<option value="1">1</option>
					<option value="2">2</option>
					<option value="3">3</option>
				</select>
			</p>
			<p>
				<button id="go" type="button">Go!</button>
			</p>
			<p>Obfuscated query: <span id="obfuscatedQuery"></span>
		</form>
	</body>
</html>
